(function(){"use strict";var t,i,u,s,_,g,p,b,B,U,y,w,k,C,T,I,R,x,M,S,N,D,A,V,H,P,$,E,z,F,O,L,q,K,W,Z,J,Q,G,X,Y,nn,tn,en,rn,un,on,ln,an,fn,cn,sn,dn,_n,vn,gn,mn,pn,bn,Bn,Un,hn,yn,wn,kn,Cn,Tn,In,Rn,xn,Mn,Sn,Nn,Dn,An,Vn,Hn=l,Pn=Hn.Xe,$n=Hn.en,En=false,jn=0,zn=null,Fn=null,On=1,Ln=function(){return zn},qn=function(n){On=n},Kn=0,Wn=0,Zn=function(){var n=Date.now();return n-Wn>8e3&&(Kn=1+(0|1879048191*Math.random())+(4095&n)),Wn=n,Kn},Jn=chrome,Qn=Jn.tabs,Gn=Jn.windows,Xn=function(){return Jn.sessions},Yn=function(){return Jn.webNavigation},nt=r.x,tt=Qn.get,et=function(n){return n.url||n.pendingUrl},rt=Qn.query.bind(null,{active:true,currentWindow:true}),it=Qn.query.bind(null,{currentWindow:true}),ut=function(n,t){var e=m.ut,r={populate:n};e>=0?Gn.get(e,r,t):Gn.getCurrent(r,t)},ot=Gn.getAll,lt=function(n){for(var t=n.length;0<--t;)if(n[t].active)return n[t];return n[0]},at=function(n,t){Qn.update(n,{active:true},t?ft:null)},ft=function(n){return n&&Gn.update(n.windowId,{focused:true}),nt()},ct=function(n,t,e){var r,i=n.url;return i?(r=Hn.q.get(i))&&1===r&&delete n.url:(i=Hn.ce.newTabUrl_f,2===m.ft&&(-1==e?i.endsWith(Hn.C.Pn)&&i.startsWith(location.origin):!e&&i.startsWith(location.protocol))||(n.url=i),n.url||delete n.url),Qn.create(n,t)},st=function(n,t,e){if(e){if(e.length>0&&e[0].incognito&&r.P(n))return ct({url:n}),void r.y()}else if(r.P(n)&&true!==t)return void rt(st.bind(null,n,true));var i={url:n};e?Qn.update(e[0].id,i,nt):Qn.update(i,nt),r.y()},dt=function(n,t,e){var r=null!=n.index;if(ct(n,n.active?function(n){n&&n.windowId!==m.ut&&ft(n)}:null,e),!(t<2))for(n.active=false;t-- >1;)r&&++n.index,Qn.create(n)},_t=function(n,t,e){var r,i=false!==n.focused,u="minimized";i?t===u&&(t="normal"):t!==u&&(t="normal"),t&&(n.state=t,t=""),n.focused=true,"string"!=typeof(r=n.url)||r&&1!==Hn.q.get(r)||delete n.url,Gn.create(n,t||!i?function(n){if(e&&e(n),n){var r=i?{}:{focused:false};t&&(r.state=t),Gn.update(n.id,r)}}:e||null)},vt=r.L(),gt=[],mt=-4,pt=function(n,t){90!==n.H?s[n.H](n,t):t.postMessage({N:4,m:n.i,r:s[n.c](n.a,t)})},bt=function(n,t){var e,r,i=yt(n),u=i.t,o=i.u,l=vt[u],f=o===Hn.ce.vomnibarPage_f,s=0;if(t>=8||f)if(t<16||f){if(Ut(n,u,t))return;i.f=2}else{if(999===t)return;s=(t>>>4&3)-1,128&t&&1===s&&(s=384&t?2:0),i.f=(128&t?3:2)+(64&t&&4)}t>=16?n.postMessage({N:6,d:Pn}):(e=void 0,r=0,l&&1&(r=i.f=3&l[0].s.f)?e=2!==(s=l[0].s.s)?null:"":s=null===(e=a.Xn(o,i))?0:e?1:2,n.postMessage({N:0,s:r,c:Pn,p:e,m:c.dt,t:c._t,k:c.lt})),i.s=s,n.onDisconnect.addListener(Bt),n.onMessage.addListener(pt),l?(l.push(n),2&t&&(En&&l[0].s.s!==s&&a.ct(u,s),l[0]=n)):(vt[u]=[n,n],0!==s&&En&&a.ct(u,s))},Bt=function(n){var t,e=n.s.t,r=vt[e];r&&(t=r.lastIndexOf(n),n.s.i?(t===r.length-1?--r.length:t>=1&&r.splice(t,1),r.length<=1?delete vt[e]:n===r[0]&&(r[0]=r[1])):t>=0&&delete vt[e])},Ut=function(n,t,e){if(e>=8){if(!xt(n,false))return t<0&&(n.s.t=8!==e?mt--:Fn?Fn.s.t:m.vt),gt.push(n),n.onDisconnect.addListener(ht),n.onMessage.addListener(pt),8===e&&n.postMessage({N:42,l:$n,s:Zn()}),true}else if(!(t<0||f<50||0===n.s.i))return Qn.executeScript(t,{file:Hn.C.Hn,frameId:n.s.i,runAt:"document_start"},nt),n.disconnect(),true;return false},ht=function(n){var t=gt,e=t.lastIndexOf(n);e===t.length-1?--t.length:e>=0&&t.splice(e,1)},yt=function(n){var t=n.sender,e=t.tab||{id:mt--,url:"",incognito:false},r=t.url;return t.tab=null,n.s={i:t.frameId,a:e.incognito,s:0,f:0,t:e.id,u:r}},wt=function(n,t,e){return(n=n||It(m.vt,0))&&Exclusions.Wn.length&&(t||Exclusions.Yn)?n.s.u:new Promise(function(t){var r=n&&n.s.i?Yn():null;n?(r?r.getFrame:tt)(r?{tabId:n.s.t,frameId:n.s.i}:n.s.t,function(i){var u=i?i.url:"";return!u&&r&&(e.N=3,Mt(n,e)),t(u),nt()}):rt(function(n){return t(n&&n.length?et(n[0]):""),nt()})})},kt=function(n,t){Fn=Fn||It(m.vt,0);var e=wt(Fn,t,n);"string"!=typeof e?e.then(function(t){n.u=t,t&&s[n.H](n,Fn)}):(n.u=e,s[n.H](n,Fn))},Ct=function(n){var t=vt[n?n.s.t:m.vt];return t?t[0]:null},Tt=function(n,t){var e,r;return null==n&&(n="unknown_sender"),null!=(r=(e=Hn.tn).get(n))?r:t===Hn.ce.vomnibarPage_f||(console.log("%cReceive message from an extension/sender not in the allow list: %c%s","background-color:#fffbe5","background-color:#fffbe5;color:red",n),e.set(n,false),false)},It=function(n,t){var e,r,i=vt[n];if(!i)return null;for(e=1,r=i.length;e<r;e++)if(i[e].s.i===t)return i[e];return null},Rt=function(n){return 4&n.f?null:(n.f|=6,i)},xt=function(n,t){var e=n.s,r=e.f;return 128&r||(e.f=r|=128|(e.u===Hn.ce.vomnibarPage_f||e.u===Hn.C._n?256:0)),!(256&r)&&(t||512&r||(console.warn("Receive a request from %can unsafe source page%c (should be vomnibar) :\n %s @ tab %o","color:red","color:auto",e.u.slice(0,128),e.t),e.f|=r),true)},Mt=function(n,t){try{return n.postMessage(t),1}catch(n){return 0}},St=function(n,t,e){n.postMessage({N:7,H:t?Rt(n.s):null,m:e,k:jn,c:0})},Nt=function(n,t,e){Dt(Fn,n,t,e,1)},Dt=function(n,t,e,r,i){n.postMessage({N:10,H:e?Rt(n.s):null,c:t,n:i,a:r})},At=function(n,t){t&&(n.startsWith("chrome-")&&n.includes("://")&&(n=n.slice(n.indexOf("/",n.indexOf("/")+2)+1)||n),n=n.length>41?n.slice(0,41)+"\u2026":n+"."),Fn&&!Mt(Fn,{N:12,H:Rt(Fn.s),k:t?n?20:t:1,t:n})&&(Fn=null)},Vt=function(t){At(n("notAllowA",[t]))},Ht=Hn.C.vn+","+f+";",Pt=function(n,e){return-1===n?jt(e,-1):(r=0===n&&Hn.an.getItem("findCSS"))?(t=Et(r),i=e.slice(Ht.length),void($n.c=Hn.an.getItem("omniCSS")||"")):void Hn.yn("baseCSS",function(t){var e,r,i,u,l;Ht.slice(Ht.indexOf(",")+1),f<54&&(t=t.replace(/user-select\b/g,"-webkit-$&")),r=(t=(e=$t(t)).ui).indexOf("all:"),i=t.lastIndexOf("{",r),u=f>=53?t.indexOf(";",r):t.length,t=t.slice(0,i+1)+t.slice(r,u+1)+t.slice(t.indexOf("\n",u)+1||t.length),f>=65&&!0?(r=t.indexOf("display:"),i=t.lastIndexOf("{",r),t=t.slice(0,i+1)+t.slice(r)):t=t.replace("contents","block"),f<73&&(t=t.replace("3px 5px","3px 7px")),f<62&&(t=t.replace(/#[\da-f]{4}([\da-f]{4})?\b/gi,function(n){n=5===n.length?"#"+n[1]+n[1]+n[2]+n[2]+n[3]+n[3]+n[4]+n[4]:n;var t=parseInt(n.slice(1),16);return"rgba("+(t>>>24)+","+(t>>16&255)+","+(t>>8&255)+","+((255&t)/255+"").slice(0,4)+")"})),f<69&&(t=t.replace(".LH{",".LH{box-sizing:border-box;")),o||(t=t.split("\nbody",1)[0]),t=t.replace(/\n/g,""),f<48?t=t.replace(/0\.01px|\/\*!DPI\*\/ ?[\w.]+/g,"/*!DPI*/1px"):f<85&&(t=t.replace(/0\.01px|\/\*!DPI\*\/ ?[\w.]+/g,"0.5px")),Hn.an.setItem("innerCSS",Ht+t),l=e.find,o||(l=l.replace("@media(-ms-high-contrast:active){","").slice(0,-1)),l=l.replace(o?/\.HC\b/g:/\.HC\b[^]+?}\s?/g,"").trim(),Hn.an.setItem("findCSS",l.length+"\n"+l),Hn.an.removeItem("omniCSS"),jt(Hn.on("userDefinedCss"),n)});var r},$t=function(n){var t,e,r=n?n.split(/^\/\*\s?#!?([A-Za-z:]+)\s?\*\//m):[""],i={ui:r[0].trim()};for(t=1;t<r.length;t+=2)i[e=r[t].toLowerCase()]=(i[e]||"")+r[t+1].trim();return i},Et=function(n){var t=(n=n.slice(n.indexOf("\n")+1)).indexOf("\n")+1,e=n.indexOf("\n",t);return{c:n.slice(0,t-1),s:n.slice(t,e).replace("  ","\n"),i:n.slice(e+1)}},jt=function(n,e){var r,u,o,l,a,f,c,s,d,_,v,g,m,p=Hn.an.getItem("innerCSS"),b=p.indexOf("\n");if(p=b>0?p.slice(0,b):p,u=(r=$t(n)).ui?p+"\n"+r.ui:p,o=r["find:host"],l=r.find,a=r.omni,f="omniCSS",b=(p=Hn.an.getItem("findCSS")).indexOf("\n"),c=(p=p.slice(0,b+1+ +p.slice(0,b))).indexOf("\n",p.indexOf("\n",b+1)+1),s=p.lastIndexOf("  ",c),o=o?"  "+o.replace(/\n/g," "):"",(s>0?p.slice(s,c)!==o:o)&&(p=(p=p.slice(b+1,s>0?s:c)+o+p.slice(c)).length+"\n"+p),l=l?p+"\n"+l:p,p=(Hn.an.getItem(f)||"").split("\n",1)[0],a=a?p+"\n"+a:p,-1===e)return{ui:u.slice(Ht.length),find:Et(l),omni:a};if(Hn.an.setItem("innerCSS",u),Hn.an.setItem("findCSS",l),a?Hn.an.setItem(f,a):Hn.an.removeItem(f),Pt(0,u),0!==e&&1!==e){for(_ in d={N:12,H:i,f:t},vt)for(g=(v=vt[+_]).length;0<--g;)4&(m=v[g].s).f&&(v[g].postMessage(d),m.f|=32);Hn.dn({N:47,d:{c:$n.c}})}};Hn.mn.userDefinedCss=jt,Hn.kn=Pt,(i=Hn.an.getItem("innerCSS")||"")&&i.startsWith(Ht)?(Hn.an.removeItem("vomnibarPage_f"),Pt(1,i)):Pt(0,i),g={__proto__:null,atob:8,base64:8,btoa:9,base64encode:9,decode:1,decodeuri:1,decodeurl:1,decodecomp:2,encode:10,encodecomp:11,unescape:3,upper:4,lower:5,normalize:6,reverse:7},p=null,b=function(n){var t,e,i,u,o,l,a,f,c,s,d,_,v,m,p,b,U,h=[];for(t=0,e=n.split("\n");t<e.length;t++)if(i=(i=e[t]).trim(),(u=/^([a-z]{1,6})([^\x00- A-Za-z\\])/.exec(i))&&(o="\\u"+(u[2].charCodeAt(0)+65536).toString(16).slice(1),l=u[1],a=new RegExp("^((?:\\\\"+o+"|[^"+o+"])+)"+o+"(.*)"+o+"([a-zD]{0,9})((,[A-Za-z]+|,host=[\\w.*-]+)*)$").exec(i.slice(u[0].length)))){for(c=(f=a[3]).replace(/[dDr]/g,""),s=[],d=null,_=+f.includes("r"),f.includes("d")?s.push(2):f.includes("D")&&s.push(1),v=0,m=a[4].toLowerCase().split(",");v<m.length;v++)(p=m[v]).startsWith("host=")?d=p.slice(5):"matched"===p?_=1:(b=g[p]||0)&&s.push(b);(U=r.Ie(a[1],_?c.replace("g",""):c))&&h.push({gt:y(l),mt:d,pt:U,bt:_,Bt:s,Ut:B(a[2])})}return h},B=function(n){return n.replace(/\\(x[0-9a-fA-F]{2}|u[0-9a-fA-F]{4}|.)/g,function(n,t){return"x"===t[0]||"u"===t[0]?"$"===(t=String.fromCharCode(parseInt(t.slice(1),16)))?t+t:t:"t"===t?"\t":"r"===t?"\r":"n"===t?"\n":"0"===t?"$&":t>="1"&&t<="9"?"$"+t:t})},U=function(n){var t=n.sed,e=n.sedKeys||n.sedKey;return null!=t||e?t&&"object"==typeof t?null!=t.r||t.k?t:null:{r:t,k:e}:null},y=function(n){var t,e,r=0;for(t=0;t<n.length;t++)r|=(e=-33&n.charCodeAt(t))<65||e>90?0:83===e?32772:1<<e-65;return r},w=function(n){var t,e;for(t=0,e=p||[];t<e.length;t++)if(e[t].gt&n)return true;return!p},k=function(n,t,e){var i,u,o,l,a,f,c,s=!e||"object"!=typeof e,d=s?e:e.r;if(false===d)return n;for(i=p||(p=b(Hn.on("clipSub"))),d&&true!==d&&(d=(d+"").replace(/(?!\\) ([a-z]{1,6})(?![\x00- A-Za-z\\])/g,"\n$1"),i=i.concat(b(d))),t=!s&&e.k?y(e.k):t,o="",a=function(e){var i,a,f,c,s,d,_;if(e.gt&t&&(!e.mt||(o=""!==o?o:(u=r.re(n))&&u.host.toLowerCase())&&((l=2*+e.mt.endsWith(".*")+ +e.mt.startsWith("*."))>2?("."+o+".").includes(e.mt.slice(1,-1)):l>1?(o+".").startsWith(e.mt.slice(0,-1)):l?("."+o).endsWith(e.mt.slice(1)):o===e.mt))){if(i=-1,e.bt?(a=0,n.replace(e.pt,function(n){var t=arguments;return i=(a=t[t.length-2])+n.length,f=t.length>3?t[1]:"",""}),i>=0&&(c=n.replace(e.pt,e.Ut),n=c.slice(a,c.length-(n.length-i))||f||n.slice(a,i))):e.pt.test(n)&&(i=e.pt.lastIndex=0,n=n.replace(e.pt,e.Ut)),i<0)return"continue";for(o="",s=0,d=e.Bt;s<d.length;s++)n=1===(_=d[s])?r.je(n):2===_?r.de(n):3===_?B(n):4===_?n.toLocaleUpperCase():5===_?n.toLocaleLowerCase():10===_?r.encodeAsciiURI(n):11===_?r.encodeAsciiComponent(n):8===_?r.Q(n,"atob"):9===_?btoa(n):(n=6!==_&&7!==_||false?n:n.normalize(),7===_?Array.from(n).reverse().join(""):n)}},f=0,c=i;f<c.length;f++)a(c[f]);return r.y(),n},C=function(){var n=document.createElement("textarea");return n.style.position="absolute",n.style.left="-99px",n.style.width="0",n},T=function(n,t,e){"string"!=typeof n&&(n="json"===t?JSON.stringify(n,null,2):n.join(t!==!!t&&t||"\n")+(n.length>1&&(!t||t===!!t)?"\n":""));var i=(n=n.replace(r.F," ").replace(/[ \t]+(\r\n?|\n)|\r\n?/g,"\n")).charCodeAt(n.length-1);return 32!==i&&9!==i||((i=n.lastIndexOf("\n")+1)?n=n.slice(0,i)+n.slice(i).trimRight():32!==(i=n.charCodeAt(0))&&9!==i&&(n=n.trimRight())),k(n,4,e)},I=function(n,t){return n&&(n=n.replace(r.F," "),n=k(n,32768,t)),n},R=function(n,t,e){if(n=T(n,t,e)){var r=document,i=C();i.value=n,r.documentElement.appendChild(i),i.select(),r.execCommand("copy"),i.remove(),i.value=""}return n},x=Hn.C.Rn?function(n,t){var e,i=C();return i.maxLength=t||102400,document.documentElement.appendChild(i),i.focus(),document.execCommand("paste"),e=i.value.slice(0,t||102400),i.value="",i.remove(),i.removeAttribute("maxlength"),t||"data:"!==e.slice(0,5).toLowerCase()&&!r.$(e)?I(e,n):r.be(n,20971520)}:function(){return null},r.he=R,r.be=x,r.we=k,Hn.mn.clipSub=function(){p=null},M=function(n,t){return"before"===t?n.index:"start"===t||"begin"===t?0:"after"!==t&&t?void 0:n.index+1},S=function(n,t,e,i){if(i instanceof Promise)i.then(S.bind(0,n,t,e));else switch(r.y(),i[1]){case 1:At(i[0],15);break;case 5:case 6:t.$p||6===i[1]?n=0:(t=r.r(r.L(),t)).$p=1,zn=t,E(r.V(i[0]),n,e);break;case 4:n>=3&&a.ht(i[0])}},N=function(n,t,e,r,i){var u,o=r&&i.filter(function(n){return n.id===r.windowId})[0],l=null!=o&&o.incognito;!e.window&&(l||(i=i.filter(function(n){return n.incognito&&"normal"===n.type})).length>0)?(u={url:n,active:t,windowId:l?r.windowId:i[i.length-1].id},l&&(u.index=M(r,e.position),e.opener&&(u.openerTabId=r.id)),dt(u,On),!l&&t&&ft(u)):_t({url:n,incognito:true,focused:t},o&&"normal"===o.type?o.state:"")},D=function(n){return null==n?-1:"string"!=typeof n?0|n:"reuse"===(n=n.toLowerCase().replace("-",""))?1:"newwindow"===n?2:"newfg"===n?-1:"newbg"===n?-2:"current"===n?0:"lastwndfg"===(n=n.replace("-",""))?-5:"lastwndbg"===n?-6:-1},A=function(n,t,e){var i,u,o,l,a,f,c,s,d=t&&t.length>0?et(t[0]):"",_=[e,zn.host_mask||Ln().host_mark,zn.tabid_mask||Ln().tabId_mask||Ln().tabid_mark,zn.title_mask||Ln().title_mark,zn.id_mask||Ln().id_mark||Ln().id_marker],v=[];for(i=0;i<_.length;i++)(o=(u=null!=_[i]?_[i]+"":"")?n.indexOf(u):-1)>=0&&v.push([o,o+u.length,0===i?/[%$]s/.test(u)?r.encodeAsciiComponent(d):d:1===i?new URL(d).host:2===i?d&&""+t[0].id:3===i?d&&""+r.encodeAsciiComponent(t[0].title):Jn.runtime.id]);if(v.length){for(l="",a=0,v.sort(function(n,t){return n[0]-t[0]}),f=0,c=v;f<c.length;f++)l=l+n.slice(a,(s=c[f])[0])+s[2],a=s[1];n=l+n.slice(a)}return n},V=function(n,t,e,i){var u,o=i[0],l=!!o&&o.incognito,a=e.incognito,f=-2!==t&&-6!==t,c=2===t||t<-4||e.window;if(r.P(n))(l||2===m.ft)&&(c=true);else if(l){if(false!==a)return void N(n,f,e,o,[{id:o.windowId,incognito:true,type:"normal",state:"normal",focused:true}]);c=true}else if(a)return void ot(N.bind(null,n,f,e,o));if(c)return t<-4&&m.yt>=0?void Qn.create({windowId:m.yt,active:t>-6,url:n&&1!==Hn.q.get(n)?n:void 0},function(){if(nt())return V(n,2,e,i),nt()}):void ut(false,function(t){var e=t.state;_t({url:n,focused:f},"minimized"!==e&&"docked"!==e?e:"")});u={url:n,active:f,windowId:o?o.windowId:void 0,openerTabId:e.opener&&o?o.id:void 0,pinned:!!e.pinned,index:o?M(o,e.position):void 0},dt(u,On)},H=function(n,t){if(!"void 0;void(0);".includes(n.slice(11).trim())){if(!t&&Fn){if(Mt(Fn,{N:5,u:n}))return;Fn=null}var e=function(e){if(-1===e||nt()){var i=r.Q(n.slice(11));return Qn.executeScript({code:i},function(){return nt()&&t&&t(),nt()}),nt()}};f<71?Qn.update({url:n},e):e(-1)}},P=function(n,t,e,r){var i,u,o,l=Hn.C.Dn;return!(n.length<l.length+3||!n.startsWith(l))&&(r?((n=n.slice(l.length)).startsWith("#!image ")&&2===m.ft&&(n="#!image incognito=1&"+n.slice(8).trim()),i=r.incognito,Hn.De.Ze=(u=[n,null,0])[1]=function(){return clearTimeout(u[2]),Hn.De.Ze=null,u[0]},u[2]=setTimeout(function(){u[0]="#!url vimium://error (vimium://show: sorry, the info has expired.)",u[2]=setTimeout(function(){Hn.De.Ze===u[1]&&(Hn.De.Ze=null),u[0]="",u[1]=null},2e3)},1200),On=1,0!==t||i?i?ct({url:l,active:-2!==t}):V(l,t,e,[r]):(o=f>=54&&!r.url.split("#",2)[1]?Jn.extension.getViews({tabId:r.id}):[]).length>0&&o[0].location.href.startsWith(l)&&o[0].onhashchange?o[0].onhashchange():Qn.update(r.id,{url:l}),true):(rt(function(r){if(!r||r.length<=0)return nt();P(n,t,e,r[0])}),true))},$=function(n){var t,e,i,u,o,l,a,f,c=n&&n[0],s=c&&c.windowId,d=zn.urls,_=On;if(!zn.wt){for(t=0;t<d.length;t++)d[t]=r.V(d[t]+"");zn.wt=1}e=D(zn.reuse),i=!!Ln().pinned,u=2===e||Ln().window?{url:d.length>0?d:void 0,incognito:!!zn.incognito}:null,o=e>-2,l=c&&M(c,zn.position),zn=null;do{if(u)Gn.create(u,nt);else for(a=0,f=d;a<f.length;a++)ct({url:f[a],index:l,windowId:s,active:o,pinned:i}),o=false,null!=l&&l++}while(0<--_);return nt()},E=function(n,t,e){var i,u,o,l,a,f,c;"string"!=typeof n||(n||9!==t?(i=zn.url_mask,u=Ln().url_mark,null==i&&null==u||(n=A(n,e,null!=i?i:u)),9!==t&&(o=(zn.keyword||"")+"",n=(null!=(l=zn.testUrl)?l:!o)?r.V(n,o,t):r.ee(n.trim().split(r.O),o||"~")),(a=zn.goNext)&&n&&"string"==typeof n&&(n=k(n,8192),n=F(n,On,a)[1])):n=Hn.ce.newTabUrl_f),c=D((f=zn).reuse),zn=null,r.y(),"string"!=typeof n?S(t,f,e,n):P(n,c,f)||(r.$(n)?H(n):1===c?W({u:n}):0===c?st(n):e?V(n,c,f,e):rt(V.bind(null,n,c,f)))},z=function(t,e){var i,u,o,l,a,f;null!==e?(e=e.trim())?(r.G.test(e)?e=e.slice(1,-1):(i=zn.keyword)&&"~"!==i&&!zn.testUrl||(e=r.ae(e)),(u=e.indexOf("://")+3)>3&&r.D.test(e)&&(o=void 0,l=(e=/^ttps?:/i.test(e)?"h"+e:e).indexOf("/",u)+1||e.length,a=e.slice(u,l),e=(f=a.startsWith("0.0.0.0")?7:a.includes(":::")&&(o=/^(\[?::\]?):\d{2,5}$/.exec(a))?o[1].length:0)?e.slice(0,u)+(f>6?"127.0.0.1":"[::1]")+e.slice(u+f):e),E(e,2,t)):At(n("noCopied")):Vt("read clipboard")},F=function(n,t,e){var r=false;return n=n.replace(/\$(?:\{(\d+)[,\/#@](\d*):(\d*)(:-?\d*)?\}|\$)/g,function(n,i,u,o,l){var a,f,c,s,d;return"$$"===n?"$":(r=true,f=i&&parseInt(i)||1,c=u&&parseInt(u)||0,s=o&&parseInt(o)||0,(d=l&&parseInt(l.slice(1))||1)<0&&(c=(a=[s,c])[0],s=a[1]),t*=d,f="absolute"!==e?f+t:t>0?c+t-1:t<0?s+t:f,""+Math.max(c||1,Math.min(f,s?s-1:f)))}),[r,n]},O=function(n){var t,e,r;if(zn.urls)zn.urls instanceof Array&&(n&&n.length>0?$(n):rt($));else{if((null!=zn.url_mask||null!=Ln().url_mark)&&!n)return nt()||void rt(O);t=U(zn),zn.url?(e=zn.url+"",t&&(e=k(e,32768,t)),E(e,3,n)):zn.copied?(e=x(t))instanceof Promise?e.then(z.bind(null,n)):z(n,e):(r=zn.url_f,t&&"string"==typeof r&&r&&(r=k(r,32768,t)),E(r||"",9,n))}},L=function(n,t){var e,i,u,o,l,a,f,c,s,d;r.T(n),e=null!=t&&xt(t,true),Fn=e?t:Ct(t)||Fn,i=n.u,o=(n.k||"")+"",a=null!=(l=n.t)?l:!o,c=n.r,s=n.e,(u=r.L()).reuse=null==(f="reverse"===n.i?Fn?!Fn.s.a:null:n.i)||c&&"current"!==c||Fn&&f===Fn.s.a?c:-1,u.incognito=f,u.sed=s,i?(":"===i[0]&&e&&/^:[bdhostw]\s/.test(i)&&((i=i.slice(2).trim())||(e=false)),n.f||(a?(e||(i=k(i,16384,s),s&&"object"==typeof s&&false!==s.r&&(u.sed={r:s.r,k:null})),i=r.Se(i),i=r.V(i,o,e?-1:3),d=r.B,null==n.h||2!==d&&1!==d?e&&3===d&&i.startsWith("vimium:")&&(i=r.V(i)):i=(n.h?"https":"http")+i.slice("s"===i[4]?5:4)):i=r.ee(i.trim().split(r.O),o||"~")),u.opener=e?!n.n:Hn.ce.vomnibarOptions.actions.includes("opener"),u.url_f=i):(u.copied=n.c,u.keyword=o,u.testUrl=l),u.position=n.p,On=1,zn=u,O()},q=[function(n){if(2!==m.ft&&n&&(n=n.filter(function(n){return!n.incognito})),!(n&&n.length>0))return rt(q[1].bind(this)),nt();ut(false,q[2].bind(this,n))},function(n){var t=this.s?q[3].bind(this,0):null;n.length<=0||2===m.ft&&!n[0].incognito?_t({url:this.u},"",t&&function(n){n.tabs&&n.tabs.length>0&&t(n.tabs[0])}):ct({index:n[0].index+1,url:this.u,windowId:n[0].windowId},t)},function(n,t){var e,r=t.id,i=this.u,u=n.filter(function(n){return n.windowId===r});u.length<=0&&(u=t.incognito?n:n.filter(function(n){return!n.incognito})).length<=0?rt(q[1].bind(this)):(this.p&&u.sort(function(n,t){return n.url.length-t.url.length}),(e=lt(u)).url.length>u[0].url.length&&(e=u[0]),!i.startsWith(Hn.C.Nn)||vt[e.id]||this.s?(Qn.update(e.id,{url:e.url===i||e.url.startsWith(i)?void 0:i,active:true},this.s?q[3].bind(this,0):null),e.windowId!==r&&ft(e)):(ct({url:i}),Qn.remove(e.id)))},function(n,t){var e=this;if(!t)return nt();"complete"===t.status||n>=2?j.kt(this,t):setTimeout(function(){tt(t.id,q[3].bind(e,n+1))},800)}],K=function(n,t,e,r){e&&2!==e.s.s?e.postMessage({N:7,H:r||5!==n.c?Rt(t.s):null,m:r?4:0,k:r?jn:0,c:n.c,n:n.n,a:n.a}):(n.a.$forced=true,Dt(t,n.c,false,n.a,n.n))},W=function(n,t,e){var i,u=r.Re(n.u.split("#",1)[0]),o=q[0];e||!u.startsWith("file:")&&!u.startsWith("ftp:")||u.includes(".",u.lastIndexOf("/")+1)?(n.p&&(u+="*"),i=o.bind(n)):(u+="/",i=function(t){t&&t.length>0?o.call(n,t):W(n,null,true)}),Qn.query({url:u,windowType:"normal"},i)},Z=function(){var n,t=Fn,e=-1,r=vt[t.s.t];if(r&&r.length>2){for(e=Math.max(0,r.indexOf(t,1)),n=Math.abs(On);n>0;n--)(e+=On>0?1:-1)===r.length?e=1:e<1&&(e=r.length-1);t=r[e]}St(t,0===t.s.i,t!==Fn&&r&&t!==r[0]?3:2)},J=function(){var n,t,e,r,i=Fn.s,u=i.t>=0&&vt[i.t]?null:"Vimium C can not access frames in current tab";u&&At(u),i.i&&Yn()?(t=n=i.i,r=On,Yn().getAllFrames({tabId:i.t},function(u){var o,l,a,f;do{for(e=false,o=0,l=u;o<l.length;o++)if((a=l[o]).frameId===t){e=(t=a.parentFrameId)>0;break}}while(e&&0<--r);(f=t>0&&t!==n?It(i.t,t):null)?St(f,true,4):un()})):un()},Q=function(){var n=Fn.s,e=On<0?-On:On,r=zn.index,i=r?"other"===r?e+1:"count"===r?e:r>=0?-1-(0|r):0:0,u=!!i||!zn.active,o=null;32&n.f||(n.f|=32,o=t),Nt(1,true,{c:i>0?On/e:On,l:u,f:o,m:!!zn.highlight,n:!!Ln().normalize,r:true===zn.returnToViewport,s:!i&&e<2&&!!zn.selected,p:!!zn.postOnEsc,q:u||zn.last?h.Ct(n.a,"",i<0?-i:i):""})},G=function(n,t){var e="helpDialog";Promise.all([r.me("HelpDialog"),e in Hn.ce||new Promise(function(n){Hn.yn(e,function(t){Hn.sn(e,t),n()})})]).then(function(e){var r=n.w&&It(t.s.t,0)||t,i=r.s.u.startsWith(Hn.C.Nn),u=n.a||{};r.s.f|=8,Fn=r,Nt(17,true,{h:e[0].Tt(i),o:Hn.C.Nn,e:!!u.exitOnClick,c:Hn.on("showAdvancedCommands",true)||i&&0!==Hn.De.Ke})},null)},X=function(n){var t,e,i,u,o,l,a,f,c,s=Fn,d=zn.url;null!=d&&true!==d&&"string"!=typeof d&&(d=null,delete zn.url),(s||(s=It(m.vt,0),Fn=s,s))&&(e=s.s.u,i=!(t=Hn.ce.vomnibarPage_f).startsWith(v),u=e.startsWith(v),o=n||!t.startsWith(location.origin)?Hn.C._n:t,l=(n=n||(i?u||t.startsWith("file:")&&!e.startsWith("file:///")||t.startsWith("http:")&&!/^http:/.test(e)&&!/^http:\/\/localhost[:/]/i.test(t):s.s.a||u&&!t.startsWith(e.slice(0,e.indexOf("/",e.indexOf("://")+3)+1))))||t===o||s.s.t<0,a=zn.trailingSlash,f=Ln().trailing_slash,"bookmark"===(c=r.r(r.T({v:l?o:t,i:l?null:o,t:l?0:i?2:1,s:null!=a?!!a:null!=f?!!f:null,j:l?"":Hn.C.Gn,e:!!zn.exitOnClick,d:U(zn),k:Zn()}),zn)).mode&&(c.mode="bookm"),Dt(s,7,true,c,On),c.k=-1,zn=c)},Y=function(){var n=zn.mode,e="string"==typeof n?n.toLowerCase():"",r=Fn.s,i=null,o="",l=null,a=null;16&~r.f&&(o=u,32&r.f||(r.f|=32,i=t),l=c.It,a=c.Rt,r.f|=16),Nt(6,true,{m:"caret"===e?3:"line"===e?2:1,f:i,g:a,k:l,t:!!zn.richText,s:!!Ln().start,w:o})},tn=function(n){var t=zn.show,e=Math.min(Math.max(0|Ln().jpeg,0),100),r=n&&n[0]?n[0].id:m.vt,i=n&&n[0]?n[0].title:"";i="title"===zn.name||!i||r<0?i||""+r:r+"-"+i,i+=e>0?".jpg":".png",Qn.captureVisibleTab(e>0?{format:"jpeg",quality:e}:{format:"png"},function(n){var e;if(!n)return nt();e=function(n){if("string"!=typeof n&&(n=URL.createObjectURL(n)),n.startsWith("blob:")&&(nn&&(clearTimeout(nn[0]),URL.revokeObjectURL(nn[1])),nn=[setTimeout(function(){nn&&URL.revokeObjectURL(nn[1]),nn=null},t?5e3:3e4),n]),t)en({o:"pixel=1&",u:n,f:i,a:false,e:null,r:-1},Fn);else{var e=document.createElement("a");e.href=n,e.download=i,e.target="_blank",e.click()}},n.startsWith("data:")?fetch(n).then(function(n){return n.blob()}).then(e):e(n)})},en=function(t,e){var i,u=t.u;if(!r.re(u))return Fn=e,void At(n("invalidImg"));i=Hn.C.Dn+"#!image ",t.f&&(i+="download="+r.encodeAsciiComponent(t.f)+"&"),false!==t.a&&(i+="auto=once&"),t.o&&(i+=t.o),u=t.e?k(u,32768,t.e):u,zn=r.T({opener:true,reuse:t.r}),E("string"==typeof t.k||u.startsWith(location.protocol)&&!u.startsWith(location.origin)?t.k?r.V(u,t.k,2):u:i+u,9)},rn=function(t,e,r){var i,u,o,l,a,c=r?r.id:e.s.t,s=t.s,d=D(t.r||0),_=false;if(f<72){if((r?et(r):(e.s.i?It(c,0):e).s.u).startsWith(v)&&!0)return Fn=e,void At(n("noTabHistory"));_=true}if(i=function(n,t){Qn.executeScript(n.id,{code:"history.go("+t+")",runAt:"document_start"},nt)},d)u=t.p,Qn.duplicate(c,function(n){var t,e;if(!n)return nt();-2===d&&at(c),_?i(n,s):rn({s:s,r:0},null,n),t=n.index--,null!=(e="end"===u?3e4:M(n,u))&&e!==t&&Qn.move(n.id,{index:e},nt)});else if(o=s>0?Qn.goForward:Qn.goBack)for(l=0,a=s>0?s:-s;l<a;l++)o(c,nt);else i(r,s)},un=function(){var n=Fn?Fn.s.t:m.vt,t=It(n,0);t&&St(t,true,vt[n][0]===t?2:4)},on=function(n,t){var e,i,u,o,l,a,f,c,s,d=$n.s;if(n.o||!Hn.De.We)if(o=(u=d&&" "+d+" ").includes(i=" "+n.t+" "),e=(e=(l=null!=n.e?n.e:o)?o?d:d+i:u.replace(i," ")).trim().replace(r.O," "),false!==n.b){if(n.o&&(Hn.De.We=l!==(" "+Hn.ce.vomnibarOptions.styles+" ").includes(i)),e!==d)for($n.s=e,a={N:47,d:{s:e}},f=0,c=gt;f<c.length;f++)(s=c[f])!==t&&s.postMessage(a)}else $n.s=e},ln=function(n,t){var e,r,i,u,o,l,a=zn.patterns,f=false;if(a&&a instanceof Array||(a=(a=a&&"string"==typeof a?a:(f=true,n?Hn.ce.nextPatterns:Hn.ce.previousPatterns)).split(",")),f||!zn.$n){for(e=[],r=0,i=a;r<i.length&&((u=(u=i[r])&&(u+"").trim())&&e.push(".#[".includes(u[0])?u:u.toLowerCase()),200!==e.length);r++);a=e,f||(zn.patterns=a,zn.$n=1)}o=a.map(function(n){return Math.max(n.length+12,4*n.length)}),l=Math.max.apply(Math,o),Nt(11,true,{r:zn.noRel?"":t,n:n,match:zn.match,p:a,l:o,m:l>0&&l<99?l:32})},fn=0,cn=function(t,e){var r=n("cmdConfirm",[e,n(t)]),i=Date.now(),u=window.confirm(r);return Math.abs(Date.now()-i)>9?u?e:0:1},sn=function(n){var t=an;an=null,n>1&&t&&t(n<3)},dn=function(n){fn&&clearTimeout(fn),fn=n},_n=function(n,t){var e=n.c,r=n.i;r>=-1&&fn!==r||(dn(0),n.r?sn(n.r):_(c.xt.get(e),n.n,0,t,0))},vn=function(n,t){var e,i,u,o,l,a;if(dn(0),t)return e=t[0],dn(setTimeout(vn,100,n,null)),e.postMessage({N:13,c:n,i:fn,m:""}),6&e.s.f||s[10]({},e),void(e.s.f|=2);o=0,"goBack"===(u=(i=c.xt.get(n)).Mt)||"goForward"===u?o=20:"autoOpen"===u&&(o=11),o&&(i={St:o,Nt:1,Mt:u,Dt:null,At:i.At,Vt:i.Vt}),i.Nt&&(i.St>9||i.St<1?_(i,1,0,null,0):(l=i.At)&&l.$noWarn||(a=i.At=r.L(),l&&r.r(a,l),a.$noWarn=true,console.log("Error: Command",u,"must run on pages which are not privileged")))},gn=function(n,t,e){var i,u,o,l,f=n.element,c=n.host;if(f){if(!e)return Fn&&Mt(Fn,{N:14,n:performance.now()}),0;if(/^[A-Za-z][-\w]+$/.test(f)){if(e.t!==f)return 1}else if(t.Ht||((i=document.createElement(e.t)).className=e.c,i.id=e.i,t.Ht=i),!t.Ht.matches(e.t))return 1}if(c){if(!Fn)return 0;if("string"==typeof c&&(c="^"===c[0]?(u=r.Ie(c,""))?{t:0,v:u}:null:{t:1,v:":"===c[0]?c.slice(1):c},n.host=c),c&&(t.Pt||(o=Fn.s.u,Fn.s.i&&o.lastIndexOf("://",5)<0&&!r.D.test(o)&&(o=(l=a.gn(Fn.s.t,0))?l.s.u:o),t.Pt=o),1===c.t?!t.Pt.startsWith(c.v):!c.v.test(t.Pt)))return 1}return 2},mn=function(n){var t,e,i,u,o,l,a,f,s,d,v,g,p,b,B,U,h=c.$t,y=zn.expect,w=Math.abs(On),k={},C=-1,T=zn;for(Fn||(e=vt[m.vt],Fn=e?e[0]:null),Fn&&(Fn.s.f|=2),i=0,u=y instanceof Array?y.length:0;i<u;i++){if(l=(o=y[i]).env){if(!h)return void At("No environments have been declared");if(!(a=h.get(l)))return void At('No environment named "'+l+'"');o=a}if(0===(f=gn(o,k,n)))return;if(2===f){C=l||i,T=o,l&&(t=y[i].keys);break}}if(-1===C&&y&&"object"==typeof y&&!(y instanceof Array)){if(!h)return void At("No environments have been declared");for(l in y){if(!(o=c.$t.get(l)))return void At('No environment named "'+l+'"');if(0===(f=gn(o,k,n)))return;if(2===f){C=l,T=o,t=y[l];break}}}"string"==typeof(t=t||T.keys)&&(t=t.trim().split(r.O),"number"==typeof C?T.keys=t:y[C]=t),d="number"==typeof C&&C>=0?"["+(C+1)+"] ":"",t instanceof Array?w>t.length&&1!==t.length?At(d+"Has no such a key"):("string"==typeof(s=t[1===t.length?0:w-1])&&s||At(d+"The key is invalid"),s&&(v=1,null!=(g=/^\d+|^-\d*/.exec(s))&&(s=s.slice((p=g[0]).length),v="-"!==p?parseInt(p,10)||1:-1),(b=c.Et.get(s))?36===b.St&&b.Nt?At('"runKey" can not be nested'):(r.y(),v=1===t.length?v*On:w!==On?-v:v,((B=T.options)||!y&&Object.keys(zn).length>1)&&(b=r.r(r.L(),b),U=r.L(),r.r(U,B||zn),B||delete U.keys,b.At&&r.r(U,b.At),b.At=U),_(b,v,jn,Fn,0)):At('the "'+s+'" has not been mapped'))):At(d+"Require keys: space-seperated-string | string[]")},pn=Math.abs;bn=function(n,t,e,r){var i,u,o=On;return r&&(o+=o>0?r:-r),u=o>0,(i=n+o)<=t&&i>-2?u?[n,i]:[i+1,n+1]:!zn.limited&&(pn(o)<2*(e||t)||o<10)?pn(o)<t?u?[t-o,t]:[0,-o]:[0,t]:u?[n,t]:[0,n+1]},Bn=function(){Fn&&St(Fn,false,0)},Un=function(n,t){var e,i=n.u||n.s;if(n.d)if("string"!=typeof i)for(e=i.length;0<=--e;)i[e]=r.je(i[e]+"");else i=r.je(i);else i.length<4&&!i.trim()&&" "===i[0]&&(i="");i=i&&R(i,n.j,n.e),Fn=t,i=n.s&&"object"==typeof n.s?"["+n.s.length+"] "+n.s.slice(-1)[0]:i,At(n.d?i.replace(/%[0-7][\dA-Fa-f]/g,decodeURIComponent):i,n.u?14:15)},hn=function(){var t=!!(zn.decoded||Ln().decode),e=Ln().type,i=U(zn);"frame"===e&&Fn?64&Fn.s.f?Fn.postMessage({N:3,H:16,d:t,e:i}):kt({H:16,u:"",d:t,e:i}):Qn.query("browser"===e?{windowType:"normal"}:{active:"window"!==e&&("tab"!==e||pn(On)<2)||void 0,currentWindow:true},function(u){var o,l,a,f,c,s,d,_,v,g;e&&"title"!==e&&"frame"!==e&&"url"!==e?(o=Fn?Fn.s.a:2===m.ft,a=""+((l=zn.format)||"${title}: ${url}"),f=Ln().join,c="json"===f&&!l,s=/\$\{([^}]+)\}/g,"tab"===e?(d=u.length<2?0:lt(u).index,_=bn(d,u.length),u=u.slice(_[0],_[1])):(u=u.filter(function(n){return n.incognito===o})).sort(function(n,t){return n.windowId-t.windowId||n.index-t.index}),v=u.map(function(n){return c?{title:n.title,url:t?r.je(et(n)):et(n)}:a.replace(s,function(e,i){return t&&"url"===i?r.je(et(n)):"__proto__"!==i&&n[i]||""})}),g=R(v,f,i),At("tab"===e&&u.length<2?g:n("copiedWndInfo"),15)):Un({u:"title"===e?u[0].title:et(u[0]),d:t,e:i},Fn)})},yn=function(){var t="hasIncog",e=!!zn.incognito;e&&(Fn?Fn.s.a:2===m.ft)?At(n(t)):ut(true,e?function(e){var i,u,o;if(!e)return nt();if(i=lt(e.tabs),e.incognito&&i.incognito)return At(n(t));if(u={tabId:i.id,incognito:true},o=et(i),i.incognito);else{if(e.incognito)return r.P(o)?At(n(t)):(++i.index,a.jt(i));if(r.P(o))return Vt(n("openIncog"));u.url=o}e.tabs=null,ot(function(n){var t,r;(n=n.filter(function(n){return n.incognito&&"normal"===n.type})).length?Qn.query({windowId:n[n.length-1].id,active:true},function(n){var t=n[0],e=u.tabId,r=u.url;"string"!=typeof r||r&&1!==Hn.q.get(r)||(r=void 0),Qn.create({url:r,index:t.index+1,windowId:t.windowId}),ft(t),Qn.remove(e)}):(r="normal"===e.type?e.state:"",u.url&&(t=u.tabId,u.tabId=void 0,Hn.C.qn&&(u.focused=true,r="")),_t(u,r,t?null:Bn),t&&Qn.remove(t))})}:function(t){var e,r,i,u,o,l,a,c;if(!t)return nt();if(r=(e=t.tabs).length,(i=!!zn.all)||!(r<=1)){if(u=lt(e),o=u.incognito,l=u.index,i)a=[0,c=r];else{if((c=(a=bn(l,r))[1]-a[0])>=r)return At(n("moveAllTabs"));if(c>30){if(!(c=cn("moveTabToNewWindow",c)))return;c<2&&(a=[l,l+1])}}_t({tabId:e[l].id,incognito:o},"normal"===t.type?t.state:"",c<2?Bn:function(n){var r,i,u,c,s,d,_,v,g;for(Bn(),r=e.slice(a[0],l),i=e.slice(l+1,a[1]),t.incognito&&f<52&&(r=r.filter(u=function(n){return n.incognito===o}),i=i.filter(u)),s=i.length,d=function(n){return n.id},(c=r.length)&&(Qn.move(r.map(d),{index:0,windowId:n.id},nt),c>1&&Qn.move(e[l].id,{index:c})),s&&Qn.move(i.map(d),{index:c+1,windowId:n.id},nt),_=0,v=e;_<v.length;_++)(g=v[_]).pinned&&Qn.update(g.id,{pinned:true})})}})},wn=function(n){var t,e,r,i,u,o={bypassCache:true===(zn.hard||Ln().bypassCache)},l=Qn.reload;if(!n||n.length<1)n&&ut(true,function(n){return n&&n.tabs.length&&wn(n.tabs),nt()});else if(pn(On)<2)l(lt(n).id,o);else{if(t=lt(n).index,r=(e=bn(t,n.length))[0],i=e[1],zn.single&&(r=t=t+1===i||On>0&&r!==t?r:i-1,i=t+1),(u=i-r)>20){if(!(u=cn("reloadTab",u)))return;1===u&&(r=t,i=t+1)}for(l(n[t].id,o);r!==i;r++)r!==t&&l(n[r].id,o)}},kn=function(n,t){var e,r,i,u,o,l,a,f,c,s,d,_,v,g,p=zn.highlighted;if(n){if(!t||!t.length)return nt();if(r=t.length,i=lt(t),o=1,l=u=i.index,a=u+1,pn(On)>1&&r>1){if(f=0,t[0].pinned!==i.pinned&&!(On<0&&t[u-1].pinned))for(;t[f].pinned;)f++;if((o=(c=bn(u,r-f,r))[1]-c[0])>20&&!(o=cn("removeTab",o)))return;o>1&&(l=f+c[0],a=f+c[1])}else if(p&&(d="no-current"===p,(o=(s=t.filter(function(n){return n.highlighted})).length)>1&&(d||o<r)&&(Qn.remove(s.filter(function(n){return n!==i}).map(function(n){return n.id}),nt),o=1),d))return;!l&&o>=r&&true!==(null!=zn.mayClose?Ln().mayClose:zn.allow_close)?n<2?it(kn.bind(null,2)):ot(Cn.bind(null,i,t)):(n<2&&(l=i.index=0,a=1),_=zn.goto||(Ln().left?"left":""),-2===(v=o>=r?r:"left"===_?l>0?l-1:a:"right"===_?a<r?a:l-1:"previous"===_?-2:r)&&(v=(g=a<r&&!m.zt.has(t[a].id)?t[a]:t.filter(function(n,t){return(t<l||t>=a)&&m.zt.has(n.id)}).sort(m.Ft)[0])?g.index:r),v>=0&&v<r&&at(t[v].id),Tn(i,t,l,a))}else((e=pn(On)>1||p||zn.goto||Ln().left)?it:rt)(kn.bind(null,e?2:1))},Cn=function(n,t,e){var i,u,o=false;e=e.filter(function(n){return"normal"===n.type}),"always"===zn.keepWindow?o=!e.length||e.some(function(t){return t.id===n.windowId}):e.length<=1?(o=true,(u=e[0])&&(u.id!==n.windowId?o=false:u.incognito&&!r.P(Hn.ce.newTabUrl_f)&&(i=u.id))):n.incognito||1===(e=e.filter(function(n){return!n.incognito})).length&&e[0].id===n.windowId&&(i=e[0].id,o=true),o&&ct({index:t.length,url:"",windowId:i}),Tn(n,t,0,t.length)},Tn=function(n,t,e,r){var i,u,o;Qn.remove(n.id,nt),u=t.slice(n.index+1,r),o=t.slice(e,n.index),On<0&&(u=(i=[o,u])[0],o=i[1]),u.length>0&&Qn.remove(u.map(function(n){return n.id}),nt),o.length>0&&Qn.remove(o.map(function(n){return n.id}),nt)},In=function(t){var e,i=et(t[0]),u=zn.reader,l=Ln().keyword;i.startsWith(v)?Vt(n(u?"noReader":"openExtSrc")):u&&l?(e=a.ge({u:i}))&&e.k===l?(zn=r.r(r.T({keyword:""}),zn),E(e.u,0,t)):(i=r.V(e&&zn.parsed?e.u:i,l),E(i,9,t)):u?o&&r.D.test(i)?(i=i.startsWith("read:")?r.Q(i.slice(i.indexOf("?url=")+5)):"read://"+new URL(i).origin.replace(/:\/\/|:/g,"_")+"/?url="+r.encodeAsciiComponent(i),E(i,9,t)):Vt(n("noReader")):(i=i.startsWith("view-source:")?i.slice(12):"view-source:"+i,E(i,9,t))},Rn=Math.abs,xn=[0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,1,3,0,1,3,0,0,0,3,0,1,0,2,3,0,3,1,0,0,0,1,0,0,1,0,2,1,1,0,3],Mn=[r.b,function(){var n=zn.rel,t=n?n+"":"next",e=null!=zn.isNext?!!Ln().isNext:!t.includes("prev")&&!t.includes("before"),i=U(zn);i&&false!==i.r&&(i.k||w(8192))?Promise.resolve(wt(It(Fn.s.t,0))).then(function(n){var u=e?On:-On,o=n&&k(n,8192,i),l=o?F(o,u,!zn.absolute||"absolute"):[false,n],a=l[1];l[0]&&a?(On=u,void 0===(zn=r.r(r.T({url_f:a,goNext:false,sed:false}),zn)).reuse&&(zn.reuse=0),O()):ln(e,t)}):ln(e,t)},function(){var t,e=zn.key,i=null!=(t=Ln().hideHUD)||null!=(t=zn.hideHud)?!t:!Hn.ce.hideHud,u=e&&"string"==typeof e&&e.length>3?r.j(e):"";Nt(8,i,{h:i?n("5",[u&&": "+e]):null,k:u||null,i:!!zn.insert,p:!!zn.passExitKey,r:+!!zn.reset,u:!!zn.unhover})},Z,J,Q,function(){var t,e,r,i=(zn.key||"")+"",u="darkMode"===i?"d":"reduceMotion"===i?"m":Hn.ln[i],o=u?Pn[u]:0,l=n("quoteA",[i]),a=zn.value,f="boolean"==typeof a,c="";if(u?"boolean"==typeof o?f||(a=null):f||void 0===a?c=n(f?"notBool":"needVal",[l]):typeof a!=typeof o&&(c=JSON.stringify(o),c=n("unlikeVal",[l,c.length>10?c.slice(0,9)+"\u2026":c])):c=n(i in Hn.rn?"notFgOpt":"unknownA",[l]),c)At(c);else for(a=Hn.un(u,a),t=vt[Fn.s.t],e=1;e<t.length;e++)Dt(t[e],9,r=t[e]===t[0],{k:u,n:r?l:"",v:a},1)},function(){0!==Fn.s.i||8&Fn.s.f?(window.HelpDialog||r.me("HelpDialog"),Nt(17,true,zn)):G({a:zn},Fn)},X,Y,function(){var n=zn.folder||Ln().path,t=n?(n+"").replace(/\\/g,"/").split("/").filter(function(n){return n}):[];t.length?Jn.bookmarks.getTree(function(n){var e,r,i,u,o,l,a;if(!n)return nt();for(r=(e=n[0].children).filter(function(n){return n.title===t[0]}),e=r.length?r:e.reduce(function(n,t){return n.concat(t.children)},[]),i=null,u=function(n){return(e=e.filter(function(t){return t.title===n})).length?(e=(i=e[0]).children)?void 0:"break":{value:At("The bookmark folder is not found.")}},o=0,l=t;o<l.length;o++){if("object"==typeof(a=u(l[o])))return a.value;if("break"===a)break}(On*On<2?rt:it)(function(n){var t,e,r,u,o,l,a,f;if(n&&n.length){if(t=lt(n).index,(o=(u=(e=bn(t,n.length))[1])-(r=e[0]))>20){if(!(o=cn("addBookmark",o)))return;1===o&&(r=t,u=t+1)}for(l=0,a=n.slice(r,u);l<a.length;l++)Jn.bookmarks.create({parentId:i.id,title:(f=a[l]).title,url:et(f)},nt);At("Add "+(u-r)+" bookmark"+(u>r+1?"s":"")+".")}else nt()})}):At('Need "path" to a bookmark folder.')},function(){zn=r.T({copied:true,keyword:zn.keyword}),O()},tn,function(){e.Ot(zn,Fn)},function(){var t=Fn?Fn.s.a:2===m.ft;return h.Lt(t),At(n("fhCleared",[t?n("incog"):""]))},function(){zn.local?Ln().all?j.qt("#"):kt({H:18,u:"",a:2},true):j.qt()},hn,function n(t){if(zn.url||Ln().urls)return O(t),nt();var e=null;return!t||t instanceof Array?t&&t.length>0&&(e=t[0]):(e=t,m.vt=e.id),!e&&m.vt>=0?tt(m.vt,n):dt(e?{active:true,windowId:e.windowId,openerTabId:zn.opener?e.id:void 0,index:M(e,zn.position)}:{active:true},On,zn.evenIncognito),nt()},function(t){var e,r,i,u,o,l,a;if(f<54&&At(n("noDiscardIfOld",[54])),e=lt(t).index,u=(r=Math.max(0,Math.min(e+On,t.length-1)))>e?1:-1,(i=Rn(r-e))>20&&(i=cn("discardTab",i)),i)for(!(o=t[e+u]).discarded&&(i<2||o.autoDiscardable)&&Qn.discard(o.id,i>1?nt:function(){var t=nt();return t&&At(n("discardFail")),t}),l=2;l<=i;l++)!(a=t[e+u*l]).discarded&&a.autoDiscardable&&Qn.discard(a.id,nt)},function(){var t,e=Fn?Fn.s.t:m.vt;if(e<0)return Vt(n("dupTab"));Qn.duplicate(e),On<2||(t=function(n){dt({url:et(n),active:false,windowId:n.windowId,pinned:n.pinned,index:n.index+2,openerTabId:n.id},On-1)},f>=52||0===m.ft||Hn.C.qn?tt(e,t):ut(true,function(n){var r,i=n&&n.tabs.filter(function(n){return n.id===e})[0];if(!i||!n.incognito||i.incognito)return i?t(i):nt();for(r=On;0<--r;)Qn.duplicate(e)}))},function(n){n.length&&rn({s:On,r:zn.reuse},null,n[0])},function(n){var t,e,r,i,u,o;if(!(n.length<2)){if(t=On,e=n.length,(u=n[i=(i=zn.absolute?t>0?Math.min(e,t)-1:Math.max(0,e+t):Rn(t)>2*n.length?t>0?-1:0:(r=lt(n)).index+t)>=0?i%e:e+(i%e||-e)]).pinned&&t<0&&zn.noPinned&&(o=(r||lt(n)).index)>i&&!n[o-1].pinned){for(;n[i].pinned;)i++;u=n[i]}u.active||at(u.id)}},function(){"frame"!==zn.type&&Fn&&Fn.s.i&&(Fn=It(Fn.s.t,0)||Fn),kt({H:3,u:"",p:On,t:zn.trailingSlash,r:Ln().trailing_slash,s:U(zn),e:true})},function(){var n=zn.sort,t=zn.windows,e="current"===t,i=function(i){var u,o,l,a,f=2===m.ft;i=e?i:i.filter(function(n){return n.incognito===f}),u=e?i:i.filter(function(n){return n.id===m.ut}),o=u.length?u[0]:null,(e||o)&&(l=function(t){var e,u,o,l,a,f,c,s,d,_,v,g,p,b=[],B=function(n){b.push(n)};if(i.sort(function(n,t){return n.id-t.id}).forEach(function(n){return n.tabs.forEach(B)}),b.length){if(n)if(e=m.vt,u=r.L(),n.includes("time")&&!n.includes("creat")||n.includes("recen")){for(o=0,l=b;o<l.length;o++)f=(a=l[o]).id,c=m.zt.get(f),u[f]=f===e?2048:null!=c?c.i:f+2049;b.sort(function(n,t){return u[n.id]-u[t.id]})}else b.sort(function(n,t){return n.id-t.id});for(s=t?t.tabs.length:0,d=t?t.id:m.ut,_=0,v=b;_<v.length;_++)Qn.move((a=v[_]).id,{windowId:d,index:s++});for(g=0,p=b;g<p.length;g++)(a=p[g]).pinned&&Qn.update(a.id,{pinned:true})}},o&&"popup"===o.type&&o.tabs.length?(a=o.tabs[0].id,o.tabs=o.tabs.filter(function(n){return n.id!==a}),_t({tabId:a,incognito:o.incognito},o.state,l)):(i=e||!o||n&&n.includes("all")||"all"===t?i:i.filter(function(n){return n.id!==o.id}),l(o)))};e?ut(true,function(n){return n?i([n]):nt()}):ot({populate:true,windowTypes:["normal","popup"]},i)},un,function(n){for(var t=lt(n),e=t.pinned,r=Math.max(0,Math.min(n.length-1,t.index+On));e!==n[r].pinned;)r-=On>0?1:-1;r!==t.index&&Qn.move(t.id,{index:r})},yn,function(n){var t=n[0];ot(function(n){var e,r,i=t.windowId,u=false===zn.minimized||false===zn.min,o=n.filter(function(n){return n.incognito===t.incognito&&"normal"===n.type&&(!u||"minimized"!==n.state)});if(o.length>0){if(e=o.map(function(n){return n.id}),i=e.indexOf(i),e.length>=2||i<0)return r=(i+On)%e.length,i<0&&On<0&&r++,r<0&&(r+=e.length),void Qn.query({windowId:e[r],active:true},function(n){var e=n[0],r=zn.end?3e4:e.index+(zn.right?1:0),i=function(){Qn.move(t.id,{index:r,windowId:e.windowId},function(){Bn(),at(t.id,true)})};r>=0||f>=52?i():(function(n,t,e){var r="number"==typeof n;Gn.create({type:"normal",focused:false,incognito:t,state:"minimized",tabId:r?n:void 0,url:r?void 0:n},e)})(t.id,t.incognito,i)})}else o=n.filter(function(n){return n.id===i});_t({tabId:t.id,incognito:t.incognito},1===o.length&&"normal"===o[0].type?o[0].state:"",Bn)})},O,wn,function(n){if(n){var t=lt(n).index,e=bn(t,n.length,0,1),r=e[0],i=e[1];Qn.remove(n[t+1===i||On>0&&r!==t?r:i-1].id)}},kn,function(n){var t,e,i,u,o,l=lt(n),a=zn.other?0:On,f=l.index,c=false,s=zn.filter;a>0?(++f,n=n.slice(f,f+a)):(c=f>0&&n[0].pinned&&!n[f-1].pinned,a<0?n=n.slice(Math.max(f+a,0),f):n.splice(f,1)),c&&(n=n.filter(function(n){return!n.pinned})),s&&(t=s.includes("title")?l.title:"",e=s.includes("hash"),i=et(l),u=s.includes("host")?r.re(i):null,o=e?i:u?u.host:i.split("#",1)[0],n=n.filter(function(n){var l=et(n),a=u?r.re(i):null;return(a?a.host:e?l:l.split("#",1)[0])===o&&(!t||n.title===t)})),n.length>0&&Qn.remove(n.map(function(n){return n.id}),nt)},function(n){if(!(n.length<=0)){var t=n[0];++t.index,f>=52||0===m.ft||Hn.C.qn||!r.P(et(t))?a.jt(t):Gn.get(t.windowId,function(n){n.incognito&&!t.incognito&&(t.openerTabId=t.windowId=void 0),a.jt(t)})}},function(){var t=Xn(),e=function(e){if(On>e.length)return At(n("indexOOR"));var r=e[On-1],i=r.tab||r.window;i&&t.restore(i.sessionId)};if(On>t.MAX_SESSION_RESULTS)return e([]);On<=1?t.restore(null,nt):t.getRecentlyClosed(e)},function(){var t,e=Xn(),r=On;if(Rn(r)<2&&(Fn?Fn.s.a:2===m.ft))return At(n("notRestoreIfIncog"));r>(t=e.MAX_SESSION_RESULTS)&&(r=t);do{e.restore(null,nt)}while(0<--r)},mn,function(t){var e,i,u=(zn.keyword||"")+"",o=a.ge({u:et(t[0])});o&&u?(e=r.ee(o.u.split(" "),u,2),i=zn.reuse,zn=r.T({reuse:null!=i?i:0,opener:true,url_f:e}),O(t)):At(n(u?"noQueryFound":"noKw"))},function(){var n,t=zn.id,e=Ln().data;t&&"string"==typeof t&&void 0!==e?(n=Date.now(),chrome.runtime.sendMessage(t,zn.raw?e:{handler:"message",from:"Vimium C",count:On,keyCode:jn,data:e},function(e){var r=nt();return r?(console.log("Can not send message to the extension %o:",t,r),At("Error: "+(r.message||r))):"string"==typeof e&&Math.abs(Date.now()-n)<1e3&&At(e),r})):At('Require a string "id" and message "data"')},function(){var t=zn.text;At(t?t+"":n("needText"))},function(n){e.Kt(zn,On,n)},function(){zn.all||Ln().other?Qn.query({audible:true},function(t){var e,r,i,u=zn.other?Fn?Fn.s.t:m.vt:-1,o=-1===u?"All":"Other",l=false,a={muted:true};for(e=t.length;0<=--e;)(r=t[e]).id===u||r.mutedInfo.muted||(l=true,Qn.update(r.id,a));if(l)return At(n("mute",[o]));for(a.muted=false,e=t.length;0<=--e;)(i=t[e].id)!==u&&Qn.update(i,a);At(n("unmute",[o]))}):rt(function(t){var e=t[0],r=!e.mutedInfo.muted;Qn.update(e.id,{muted:r}),At(n(r?"muted":"unmuted"))})},function(n){var t,e,r,i,u=lt(n),o=!u.pinned,l={pinned:o},a=o?0:1,f=0;if(pn(On)>1&&o)for(;n[f].pinned;)f++;for(e=f+(t=bn(n.length<2?0:u.index,n.length-f,n.length))[a]-a,r=f+t[1-a]-a,i=[];e!==r;e+=o?1:-1)(o||n[e].pinned)&&i.push(n[e].id);if((r=i.length)>30){if(!(r=cn("togglePinTab",r)))return;1===r&&(i=[u.id])}for(e=0;e<r;e++)Qn.update(i[e],l)},In,function(t){var e,r,i,u=t[0].id,o=((zn.style||"")+"").trim(),l=!!Ln().current;if(o){for(e=0,r=gt;e<r.length;e++)if((i=r[e]).s.t===u)return void i.postMessage({N:46,t:o,c:l});l||on({t:o,o:1})}else At(n("noStyleName"))},function(){Qn.getZoom(function(n){var t,e,r,i,u,o,l;if(!n)return nt();if(On<-4&&(On=-On),e=Math,On>4)t=e.max(.25,e.min(t=On/(On>1e3?On:On>49?100:10),5));else{for(r=0,i=9,u=[.25,1/3,.5,2/3,.75,.8,.9,1,1.1,1.25,1.5,1.75,2,2.5,3,4,5],o=0,l=0;o<u.length&&(l=Math.abs(u[o]-n))<i;o++)r=o,i=l;t=u[r+On<0?0:e.min(r+On,u.length-1)]}Math.abs(t-n)>.005&&Qn.setZoom(t)})},function(n){if(!(n.length<2)){n.splice(lt(n).index,1);var t=(n=n.filter(function(n){return m.zt.has(n.id)}).sort(m.Ft))[On>0?Math.min(On,n.length)-1:Math.max(0,n.length+On)];t&&at(t.id)}}],Sn=function(n){var t=an;return an=null,t&&t(n),n?void 0:nt()},Nn=function(n,t){r.Fe(),KeyMappings?KeyMappings.Wt(n,t,_):r.me("KeyMappings").then(function(){return Nn(n,t)})},_=function(n,t,e,i){var u,o,l,a,f,c;if(an)an=null;else{if(o=n.Vt,(u=n.At)&&(l=u.count)&&(t=t*l||1),1===(t=t>=1e4?9999:t<=-1e4?-9999:0|t||1));else if(1===o)t=1;else if(o>0&&(t>o||t<-o)){if(!(t=cn(n.Mt,Rn(t))*(t<0?-1:1)))return}else t=t||1;if(!n.Nt)return Fn=i,void Dt(i,a=n.St,9224>>a&1||5===a&&!!u&&false===u.keepHover,u,t);c=Mn[f=n.St],jn=e,zn=u||r.L(),Fn=i,On=t,(t=xn[f])<1?c():(an=c,(t<2||2===t&&Rn(On)<2?rt:it)(Sn))}},Dn=-1,s=[function(t,e){var r,i,u=t.k,o=Hn.jn;if(!(u>=0&&u<o.length))return Fn=e,Vt(n("notModify",[u]));r=o[u],i=Hn.zn&&Hn.zn(),Hn.on(r)!==t.v&&(i?i.then(function(){Hn.sn(r,t.v)}):Hn.sn(r,t.v))},function(n,t){return h.Ct(t.s.a,n.q,n.i)},function(n,t){var e=a.ge(n);if(!("i"in n))return e;t.postMessage({N:44,i:n.i,s:e})},function(n,t){var e,i,u,o,l,a,f,c,d,_,g,m,p,b,B,U,h,y,w,C,T,I;if(n.e)return n.e=false,void(null==(e=s[3](n)).p?(Fn=t,At(e.u)):t?Nt(0,false,{r:1,url:e.u}):Qn.update({url:e.u}));if(u=(i=n.u).toLowerCase(),1===n.p&&(o=k(i,131072,n.s))!==i&&o&&o!==i+"/"&&o+"/"!==i&&(r.V(o,null,-2),0===r.B))return{u:o,p:"(sed)"};if(!r.D.test(r.te(u)))return r.y(),{u:"This url has no upper paths",p:null};if(l=encodeURIComponent,a="",_=false,m=null,b=0,B=0,U=false,(p=i.lastIndexOf("#")+1)&&(a=i.slice(p+ +("!"===i.substr(p,1))),((p=(f=r.Q(a)).lastIndexOf("/"))>0||0===p&&f.length>1)&&(U=f!==a,"/"===(m=(c=(y=/([^&=]+=)([^&\/=]*\/[^&]*)/).exec(f)||/(^|&)([^&\/=]*\/[^&=]*)(?:&|$)/.exec(f))?c[2]:f)||m.includes("://")?m=null:c?U?(f="https://example.com/",f=encodeURI(f+m).slice(f.length),(p=a.indexOf(f))<0&&(p=a.indexOf(f=l(m))),p<0&&(U=false,p=a.indexOf(f=m)),B=p+f.length,p<0&&"&"!==c[1]&&((p=a.indexOf(f=c[1]))<0&&(U=true,f=l((f=c[1]).slice(0,-1)),p=a.indexOf(f)),p>=0&&(B=a.indexOf("&",p+=f.length)+1)),p>=0?b=p:(h=y.exec(a))?(m=r.Q(h[2]),B=(b=h.index+h[1].length)+h[2].length):"&"!==(f=c[1])&&(p=i.length-a.length,a=f+l(m),i=i.slice(0,p)+a,b=f.length,B=0)):b=c.index+c[1].length:b=0,m&&(b+=p=i.length-a.length,B>0&&(B+=p)))),!m){if(u.startsWith(v)&&!n.f)return r.y(),{u:"An extension has no upper-level pages",p:null};a="",b=i.indexOf("/",i.indexOf("://")+3),u.startsWith("filesystem:")&&(b=i.indexOf("/",b+1)),p=i.indexOf("?",b=b<0?0:b),B=i.indexOf("#",b),m=i.slice(b,p=(p=B<0?p:p<0?B:p<B?p:B)>0?p:i.length),B=0,U=false}if(p=n.p,d=m.startsWith("/"),!a&&u.startsWith("file:")){if(m.length<=1||11===i.length&&i.endsWith(":/")){if(!n.f)return r.y(),{u:"This has been the root path",p:null};p=0}_=true,n.f||1===p&&(p=-1)}else _=!(a||!u.startsWith("ftp:"))||(null!=n.t?!!n.t:null!=n.r?!!n.r:m.length>1&&m.endsWith("/")||/\.([a-z]{2,3}|apng|jpeg|tiff)$/i.test(m));return C=(w=m.slice(+d,m.length-+m.endsWith("/")).split("/")).length,T=p<0?p+C:p,g=C<=1&&p<=-2&&i.lastIndexOf("#",b)>0,w.length=p=T>C?C:p>0?T-1:T>0?T:0,m=w.join("/"),(f=n.a||"")&&(m+="/"===f[0]?f:"/"+f),m=m?("/"===m[0]?"":"/")+m+(!_||m.endsWith("/")?"":"/"):"/",!B&&i.lastIndexOf("git",b-3)>0&&(m=An(i,m)||m),!g||m&&"/"!==m?(f=U?l(m):m,i=i.slice(0,b)+(B?f+i.slice(B):f)):i=i.split("#",1)[0],(I=k(i,64,n.s)||i)!==i&&(r.V(I,null,-2),i=0===r.B?I:i),r.y(),{u:i,p:m}},function(t,e){var i,u,o=a.ge(t);if(!o||!o.k)return Fn=e,At(n("noEngineFound"));u=function(t){var i=null===t?"It's not allowed to read clipboard":(t=t.trim())?"":n("noSelOrCopied");if(i)return Fn=e,void At(i);t=r.ee(t.split(r.O),o.k),P(t,0,{})||st(t)},(i=t.t.trim()||(t.c?x(t.s):""))instanceof Promise?i.then(u):u(i)},function(t,e){var r,i=t.s,u=false!==t.a;Fn=Ct(e),"number"!=typeof i?(Xn().restore(i,function(){var t=nt();return t&&At(n("noSessionItem")),t}),u||((r=e.s.t)>=0||(r=m.vt),r>=0&&at(r))):Qn.update(i,{active:true},function(t){return nt()?At(n("noTabItem")):ft(t),nt()})},L,function(n,t){var e,r=t.s.t,i=vt[r];if(i){if(t!==i[0])return En&&(e=t.s.s)!==i[0].s.s?(i[0]=t,void a.ct(r,e)):void(i[0]=t)}else En&&a.ct(r,t.s.s)},function(n,t){var e,r,i,u,o=t;if(o||(o=It(n.tabId,n.frameId))){if(r=(e=o.s).u,i=a.Xn(e.u=t?n.u:n.url,e),e.s!==(u=null===i?0:i?1:2)){if(1&e.f)return;e.s=u,En&&vt[e.t][0]===o&&a.ct(e.t,u)}else if(!i||i===a.Xn(r,e))return;o.postMessage({N:1,p:i,f:0})}},function(n,t){var e,r;Fn=t,On=1,jn=n.k,2!==(e=n.t||0)?1===e?J():Z():(r=vt[t.s.t])?St(r[0],r.length<=3,1):Mt(t,{N:45,l:jn})},function(n,t){var e,r,i,u=vt[t.s.t];if(u&&(u[0].s.f|=2,!(u.length<3)))for(e={N:8},r=u.length;0<--r;)(i=u[r])!==t&&(i.postMessage(e),i.s.f|=2)},function(n,t){var e,r,i=t.s.t,u=vt[i],o=n.u;if(!u||u.length<3)return false;for(e=null,r=u.length;1<=--r;)if(u[r].s.u===o){if(e){e=null;break}e=u[r]}return e?(jn=n.k,K(n,t,e,1)):Yn()&&Yn().getAllFrames({tabId:t.s.t},function(e){var r,u,o,l,a=0,f=t.s.i;for(r=0,u=e;r<u.length;r++)if((o=u[r]).parentFrameId===f){if(a){a=0;break}a=o.frameId}(l=a&&It(i,a))&&(jn=n.k,K(n,t,l,1))}),!!e},G,function(n,t){t.s.f|=6,t.postMessage({N:12,H:i})},function(n,t){var e=n.c,i=n.i;if(jn=0,null!=e)delete n.c,delete n.H,delete n.i,On=+e||1,zn=r.T(n);else{if(true!==n.r)return;if(null==zn||-1!==Ln().secret){if(i)return;zn=r.L(),On=1}else if(i&&zn.v===Hn.C._n)return}Fn=t,X(i)},function(n,t){xt(t,false)||d.Zt(n.q,n,Vn.bind(t,0|n.i))},Un,function(n,t){var e,i,u,o,l,a;t.s.f|=2,i=1,null!=(u=/^\d+|^-\d*/.exec(e=n.k))&&(e=e.slice((o=u[0]).length),i="-"!==o?parseInt(o,10)||1:-1),(l=c.Et).has(e)||(u=e.match(r.Me),e=u[u.length-1],i=1),a=l.get(e),r.y(),_(a,i,n.l,t,0)},function(n,t){switch(Fn=t,n.a){case 1:return j.Jt(n,t);case 0:return j.Qt(n,t);case 2:return j.qt(n.u);default:return}},W,_n,function(n,t){a.Gt(n,t)},en,function(t,e){Fn=null,H(t.u,function(){Fn=e,At(n("jsFail"))})},function(n,t){K(n,t,It(t.s.t,0),n.f)},on,function(n,t){zn=r.T({active:true,returnToViewport:true}),Fn=t,qn(1),Q()},rn,function(){return Hn.De.Qe&&Hn.De.Qe(),{m:Hn.nn}},function(n,t){t.s.f|=4},function(n,t){zn=r.T({mode:n.c?"caret":"",start:true}),Fn=t,qn(1),Y()},function(n){performance.now()-n.n<500&&mn(n)}],An=function(n,t){var e,i,u,o=r.re(n),l=o?o.host:"";if(l&&/git\b|\bgit/i.test(l)&&/^[\w\-]+(\.\w+)?(:\d{2,5})?$/.test(l)&&((e=t.split("/"))[i=e.length-1]||(i--,e.pop()),u=e[i],"github.com"===l)){if(3===i)return"pull"===u||"milestone"===u||"commit"===u?t+"s":"tree"===u||"blob"===u?e.slice(0,3).join("/"):null;if(4===i&&"releases"===e[3]&&("tag"===e[4]||"edit"===e[4]))return e.slice(0,4).join("/");if(i>3)return"blob"===e[3]?(e[3]="tree",e.join("/")):null}},Vn=function(n,t,e,i,u,o,l,a){var c,s,d,_,v,g,m,p=this.s.u,b=2===n?2:0;if(1===n&&f>=58&&(p=p.slice(0,p.indexOf("/",p.indexOf("://")+3)+1),c=vt,null!=(s=Dn>=0?It(Dn,0):null)&&(s.s.u.startsWith(p)?b=1:Dn=-1),!b))for(d in c){for(v=1,g=(_=c[+d]).length;v<g;v++)if(0===(m=_[v].s).i){m.u.startsWith(p)&&(b=1,Dn=+d);break}if(b)break}Mt(this,{N:43,a:e,c:a,i:b,l:t,m:i,r:l,s:u,t:o}),r.y()},a={ot:s,Xn:r.Ne,fe:wt,Gt:function(t,e){var r=t.t,i=t.u,u="tab"===r?r:r+" item";Fn=Ct(e),"tab"===r&&m.vt===+i?At(n("notRemoveCur")):d.Gt(i,r,function(t){At(n(t?"delSug":"notDelSug",[n("sug_"+r)||u]))})},ct:function(){},Xt:Vt,ge:function(n){var t,e,i,u,o,l,a,f=n.u,c=f.toLowerCase(),d=null,_=false;if(!r.D.test(r.te(c)))return r.y(),null;if(n.p)return{k:"",s:0,u:(u=null!=(i=s[3](n)).p)?i.u:f,e:u?i.p:i.u};for(o=Hn.ce.searchEngineRules,(e=r.Te(c))&&(c=c.slice(e),f=f.slice(e)),e=o.length;0<=--e&&(!c.startsWith((t=o[e]).Ue)||!(d=f.slice(t.Ue.length).match(t.Ce))););if(!d||!t)return c.startsWith(l=Hn.C.Dn)?{k:"vimium://show",u:f=f.slice(l.length).replace(/^#!?/,""),s:f.startsWith("image")&&f.lastIndexOf("&",f.indexOf(":")+1)+1||f.indexOf(" ")+1}:(r.y(),null);for(d.length>1&&!t.Ce.global&&d.shift(),a=t.Ee,d.length>1?_=true:a instanceof RegExp?(d=(c=d[0]).match(a))?(d.shift(),_=true):d=[c]:d=d[0].split(a),c="",e=0;e<d.length;e++)c+=" "+r.Q(d[e]);return c=c.trim().replace(r.O," "),r.y(),{k:t.Pe,u:c,s:_?c.lastIndexOf(" ")+1:0}},jt:function(n,t){var e,r,i,u,o,l,a=n.id;if(t)return e=0,r=-1,i=function(){var n=nt();if(n)return Xn().restore(),r>=0&&Qn.remove(r),r=0,n;(e+=1)>=5||setTimeout(function(){tt(a,i)},50*e*e)},1===t&&Qn.create({url:"about:blank",active:false,windowId:n.windowId},function(n){r?r=n.id:Qn.remove(n.id)}),Qn.remove(a,nt),void tt(a,i);o=!n.mutedInfo.muted,u=function(n){Qn.update(n.id,{muted:o})},l={windowId:n.windowId,index:n.index,url:et(n),active:n.active,pinned:n.pinned,openerTabId:n.openerTabId},ct(l,u),Qn.remove(a)},Yt:At,ht:function(t,e){var i,u,o,l,f,c,s,d,_,v,g,p,b,B,U,h,y,w,k,C,T=vt[e||(e=m.vt)];if(T){for(Fn=It(e,0)||T[0],u=(i=t.search(/\/| /))>0?t.slice(i+1):"",t=t.toLowerCase(),i>0&&(t=t.slice(0,i)),t.includes("-")&&t.endsWith("able")&&(t+="d"),u=((o=!!u&&/^silent/i.test(u))?u.slice(7):u).trim(),l=0,f=function(n){console.log(n),l||At(n),l=1},u&&!u.startsWith("^ ")?(f('"vimium://status" only accepts a list of hooked keys'),u=""):u&&(u=u.replace(/<(\S+)>/g,"$1").replace(r.O," ")),s=Fn.s,d=!Exclusions.Wn.length,_=s.s,v=d?0:1===_?_:(c=a.Xn(s.u,s))?1:null===c?0:2,p=!!u&&"enable"===t,B=!((b=null!==(g="enable"===t?0:"disable"===t?2:"toggle-disabled"===t?2!==_?2===v?null:2:2===v?0:null:"toggle-enabled"===t?0!==_?0===v?null:0:0===v?2:null:"toggle-next"===t?1===_?0:0===_?2===v?null:2:2===v?0:null:"toggle"===t||"next"===t?0!==_?0:2:("reset"!==t&&f('Unknown status action: "'+t+'", so reset'),null))?2===g?3:1:0)||d),U={N:1,p:2===g||p?u:null,f:b},h=b?g:0,y=T.length;1<=--y;)(k=(w=T[y]).s).f=b?1|k.f:-2&k.f,B&&1!=(h=null===(C=U.p=a.Xn(k.u,k))?0:C?1:2)&&k.s===h||(k.s=h,w.postMessage(U));h=T[0].s.s,o||l||At(n("newStat",n(0!==h||p?2===h?"fullDisabled":"halfDisabled":"fullEnabled"))),En&&h!==_&&a.ct(e,h)}},nr:function(n){var t,e=m.vt,r=vt[e];if("quickNext"===n&&(n="nextTab"),(t=c.xt)&&t.get(n))return null==r||2&r[0].s.f||e<0?vn(n,r):void tt(e,function(t){return vn(n,t&&"complete"===t.status?vt[t.id]:null),nt()});t&&null!==t.get(n)&&(t.set(n,null),console.log("Shortcut %o has not been configured.",n))},gn:function(n,t){return null==n?vt:null==t?-3===n?gt:vt[n]||null:It(n,t)},Bn:function(){3===Hn.De.Ve&&(c.lt||(Hn.pn("keyMappings"),Hn.on("vimSync")||Hn.De.He||(KeyMappings=null)),0===Pn.o&&(c.It["m-s-c"]=36),a.Bn=null,Hn.on("hideHud",true),Hn.on("nextPatterns",true),Hn.on("previousPatterns",true),Jn.runtime.onConnect.addListener(function(n){return bt(n,0|n.name)}),Jn.runtime.onConnectExternal.addListener(function(n){var t,e=n.sender,r=n.name;if(e&&Tt(e.id,e.url)&&r.startsWith("vimium-c.")&&(t=r.split("@")).length>1){if(t[1]!==Hn.C.GitVer)return n.postMessage({N:2,t:1}),void n.disconnect();bt(n,0|t[0].slice(9)),n.s.f|=64}else n.disconnect()}))}},Jn.runtime.onMessageExternal.addListener(function(n,t,e){if(Tt(t.id,t.url))if("string"!=typeof n){if("object"==typeof n&&n)switch(n.handler){case"shortcut":var r=n.shortcut;r&&a.nr(r+"");break;case"id":e({name:"Vimium C",host:location.host,shortcuts:true,injector:Hn.C.En,version:Hn.C.vn});break;case 99:e({s:n.scripts?Hn.C.Un:null,version:Hn.C.vn,host:"",h:"@"+Hn.C.GitVer});break;case"command":Nn(n,t)}}else Nn({command:n},t);else e(false)}),Hn.pn("extAllowList"),Qn.onReplaced.addListener(function(n,t){var e,r=vt,i=r[t];if(i)for(delete r[t],r[n]=i,e=i.length;0<--e;)i[e].s.t=n}),"[]"!==Hn.an.getItem("exclusionRules")&&Exclusions.Zn(Hn.on("exclusionRules")),Hn.mn.showActionIcon=function(n){En=n&&!!Jn.browserAction},Hn.pn("vomnibarPage",null),Hn.pn("searchUrl",null),Hn.pn("vomnibarOptions"),window.onunload=function(n){var t,e,r,i;if(!n||n.isTrusted){for(e in(t=vt).o=gt,t)for(i=(r=t[e]).length;0<--i;)r[i].disconnect();gt.length>0&&gt[0].disconnect()}},f<59||!r.Ie("\\p{L}","u",0)?Hn.yn("words",function(n){u=n.replace(/[\n\r]/g,"").replace(/\\u(\w{4})/g,function(n,t){return String.fromCharCode(+("0x"+t))})}):u=""})();